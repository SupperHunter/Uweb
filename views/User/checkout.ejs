<!DOCTYPE html>
<html lang="en" data-bs-theme="light" data-pwa="true">
<!-- Mirrored from cartzilla.createx.studio/checkout-v1-shipping.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 06 Sep 2024 06:29:44 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
    <meta charset="utf-8">

    <!-- Viewport -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover">

    <!-- SEO Meta Tags -->
    <title>Cartzilla | Checkout v.1 - Shipping Address</title>
    <meta name="description" content="Cartzilla - Multipurpose Bootstrap E-Commerce HTML Template">
    <meta name="keywords"
        content="online shop, e-commerce, online store, market, multipurpose, product landing, cart, checkout, ui kit, light and dark mode, bootstrap, html5, css3, javascript, gallery, slider, mobile, pwa">
    <meta name="author" content="Createx Studio">

    <!-- Webmanifest + Favicon / App icons -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="/client2/assets/app-icons/icon-32x32.png" sizes="32x32">
    <link rel="apple-touch-icon" href="/client2/assets/app-icons/icon-180x180.png">

    <!-- Theme switcher (color modes) -->
    <script src="/client2/assets/js/theme-switcher.js"></script>

    <!-- Preloaded local web font (Inter) -->
    <link rel="preload" href="/client2/assets/fonts/inter-variable-latin.woff2" as="font" type="font/woff2"
        crossorigin="">

    <!-- Font icons -->
    <link rel="preload" href="/client2/assets/icons/cartzilla-icons.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="stylesheet" href="/client2/assets/icons/cartzilla-icons.min.css">

    <!-- Vendor styles -->
    <link rel="stylesheet" href="/client2/assets/vendor/choices.js/choices.min.css">

    <!-- Bootstrap + Theme styles -->
    <link rel="preload" href="/client2/assets/css/theme.min.css" as="style">
    <link rel="preload" href="/client2/assets/css/theme.rtl.min.css" as="style">
    <!-- <link rel="stylesheet" href="/client2/assets/css/theme.min.css" id="theme-styles"> -->

    <!-- Customizer -->
    <script src="/client2/assets/js/customizer.min.js"></script>
    <script
        src="https://www.paypal.com/sdk/js?client-id=AZfCEkk1CnocdLxx5vV5yRg_WzjZWuFm7o5i4oK8xqcTyG97cznxpMZEBanOYYBCDvQJcWQPDXVfM0OI"></script>

</head>

<body>


    <div class="modal fade" id="newAddressModal" data-bs-backdrop="static" tabindex="-1"
        aria-labelledby="newAddressModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newAddressModalLabel">Add new address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form class="row g-3 g-lg-4 needs-validation" novalidate="">
                        <div class="col-lg-6">
                            <div class="position-relative">
                                <label class="form-label">Country</label>
                                <select class="form-select" data-select="{
                        &quot;searchEnabled&quot;: true,
                        &quot;classNames&quot;: {
                          &quot;containerInner&quot;: &quot;form-select&quot;
                        }
                      }" aria-label="Select country" required="">
                                    <option value="">Select country...</option>
                                    <optgroup label="Africa">
                                        <option value="Nigeria">Nigeria</option>
                                        <option value="South Africa">South Africa</option>
                                        <option value="Kenya">Kenya</option>
                                        <option value="Egypt">Egypt</option>
                                        <option value="Ethiopia">Ethiopia</option>
                                    </optgroup>
                                    <optgroup label="Asia">
                                        <option value="China">China</option>
                                        <option value="India">India</option>
                                        <option value="Japan">Japan</option>
                                        <option value="South Korea">South Korea</option>
                                        <option value="Saudi Arabia">Saudi Arabia</option>
                                    </optgroup>
                                    <optgroup label="Europe">
                                        <option value="Germany">Germany</option>
                                        <option value="France">France</option>
                                        <option value="United Kingdom">United Kingdom</option>
                                        <option value="Italy">Italy</option>
                                        <option value="Spain">Spain</option>
                                    </optgroup>
                                    <optgroup label="North America">
                                        <option value="United States">United States</option>
                                        <option value="Canada">Canada</option>
                                        <option value="Mexico">Mexico</option>
                                        <option value="Jamaica">Jamaica</option>
                                        <option value="Costa Rica">Costa Rica</option>
                                    </optgroup>
                                    <optgroup label="South America">
                                        <option value="Brazil">Brazil</option>
                                        <option value="Argentina">Argentina</option>
                                        <option value="Colombia">Colombia</option>
                                        <option value="Chile">Chile</option>
                                        <option value="Peru">Peru</option>
                                    </optgroup>
                                    <optgroup label="Oceania">
                                        <option value="Australia">Australia</option>
                                        <option value="New Zealand">New Zealand</option>
                                        <option value="Papua New Guinea">Papua New Guinea</option>
                                        <option value="Fiji">Fiji</option>
                                        <option value="Solomon Islands">Solomon Islands</option>
                                    </optgroup>
                                </select>
                                <div class="invalid-feedback">Please select your country!</div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="position-relative">
                                <label class="form-label">country</label>
                                <select class="form-select" data-select="{
                        &quot;searchEnabled&quot;: true,
                        &quot;classNames&quot;: {
                          &quot;containerInner&quot;: &quot;form-select&quot;
                        }
                      }" aria-label="Select country" required="">
                                    <option value="">Select city...</option>
                                    <option value="Austin">Austin</option>
                                    <option value="Charlotte">Charlotte</option>
                                    <option value="Chicago">Chicago</option>
                                    <option value="Columbus">Columbus</option>
                                    <option value="Dallas">Dallas</option>
                                    <option value="Houston">Houston</option>
                                    <option value="Jacksonville">Jacksonville</option>
                                    <option value="Los Angeles">Los Angeles</option>
                                    <option value="New York">New York</option>
                                    <option value="Orlando">Orlando</option>
                                    <option value="Philadelphia">Philadelphia</option>
                                    <option value="Phoenix">Phoenix</option>
                                    <option value="San Antonio">San Antonio</option>
                                    <option value="San Diego">San Diego</option>
                                    <option value="San Jose">San Jose</option>
                                </select>
                                <div class="invalid-feedback">Please select your city!</div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="position-relative">
                                <label for="add-zip" class="form-label">ZIP code</label>
                                <input type="text" class="form-control" id="add-zip" required="">
                                <div class="invalid-feedback">Please enter your ZIP code!</div>
                            </div>
                        </div>
                        <div class="col-lg-8">
                            <div class="position-relative">
                                <label for="add-address" class="form-label">Address</label>
                                <input type="text" class="form-control" id="add-address" required="">
                                <div class="invalid-feedback">Please enter your address!</div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="form-check mb-0">
                                <input type="checkbox" class="form-check-input" id="set-primary-3">
                                <label for="set-primary-3" class="form-check-label">Set as primary address</label>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex gap-3 pt-2 pt-sm-0">
                                <!-- <button type="submit" class="btn btn-primary">Add address</button> -->
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <main class="content-wrapper">
        <div class="container py-5">
            <form action="/addnewaccountinfor" method="post" id="checkoutForm" onsubmit="Sumitform(event)">
                <div class="row pt-1 pt-sm-3 pt-lg-4 pb-2 pb-md-3 pb-lg-4 pb-xl-5">
                    <!-- <div id="panelinfor"> -->
                    <div class="col-lg-8 col-xl-7 mb-5 mb-lg-0 inform">
                        <div class="accordion d-flex flex-column gap-5 pe-lg-4 pe-xl-0" id="checkout">

                            <!-- Shipping address form -->
                            <div class="d-flex align-items-start" style="display: none;">
                                <div class="d-flex align-items-center justify-content-center bg-primary text-white rounded-circle fs-sm fw-semibold lh-1 flex-shrink-0"
                                    style="width: 2rem; height: 2rem; margin-top: -.125rem">1</div>
                                <div class="w-100 ps-3 ps-md-4">
                                    <h1 class="h5 mb-md-4">Shipping address</h1>

                                    <div class="row row-cols-1 row-cols-sm-2 g-3 g-sm-4 mb-4">
                                        <div class="col">
                                            <label for="shipping-fn" class="form-label">First name <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control form-control-lg" name="firstName"
                                                id="shipping-fn" required>
                                        </div>
                                        <div class="col">
                                            <label for="shipping-ln" class="form-label">Last name <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control form-control-lg" id="shipping-ln"
                                                name="lastname" required>
                                        </div>
                                        <div class="col">
                                            <label for="shipping-email" class="form-label">Email address <span
                                                    class="text-danger">*</span></label>
                                            <input type="email" name="email" class="form-control form-control-lg"
                                                id="shipping-email" required="">
                                        </div>
                                        <div class="col">
                                            <label for="shipping-mobile" class="form-label">Mobile number</label>
                                            <input type="text" class="form-control form-control-lg"
                                                id="shipping-mobile">
                                        </div>
                                        <div class="col">
                                            <label class="form-label">Country <span class="text-danger">*</span></label>
                                            <select name="Country" class="form-select" required="">
                                                <option value="United States">United States</option>
                                            </select>
                                        </div>
                                        <div class="col">
                                            <label class="form-label">State <span class="text-danger">*</span></label>
                                            <select id="StateSelectCurrent" name="State" class="form-select"
                                                required="">
                                                <option value="">Select your state</option>
                                            </select>
                                        </div>

                                        <div class="col">
                                            <label class="form-label">City <span class="text-danger">*</span></label>
                                            <select hidden id="CitySelecttCurrent" name="" class="form-select"
                                                required="">
                                                <option value="">Select your city</option>
                                            </select>
                                            <input type="text" class="form-control form-control-lg" id="City"
                                                name="City" required>
                                        </div>

                                        <div class="col">
                                            <label for="shipping-postcode" class="form-label">Postcode <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control form-control-lg"
                                                id="shipping-postcode" name="zipCode" required>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="shipping-address" class="form-label">
                                            Street Address <span class="text-danger">*</span></label>
                                        <input type="text" name="address" class="form-control form-control-lg"
                                            id="shipping-address" required>
                                    </div>
                                    <h3 class="h6">

                                        <i class="ci-info text-body-secondary align-middle ms-2"
                                            data-bs-toggle="popover" data-bs-trigger="hover"
                                            data-bs-custom-class="popover-sm"
                                            data-bs-content="Uncheck the checkbox below if your Billing address should be different from your Shipping address."></i>
                                    </h3>
                                    <div class="form-check mb-lg-4">
                                        <input type="checkbox" class="form-check-input" id="same-address" checked=""
                                            style="position: relative; z-index: 10;">
                                        <label for="same-address" class="form-check-label">Same as delivery
                                            address</label>
                                    </div>

                                    <!-- vi tri cho form submit giong dia chi -->
                                    <div class="needs-validation" id="shipping-address-form-2" style="display: none;">
                                        <div class="row row-cols-1 row-cols-sm-2 g-3 g-sm-4 mb-4">
                                            <div class="col">
                                                <label for="shipping-fn" class="form-label">First name <span
                                                        class="text-danger">*</span></label>
                                                <input type="text" class="form-control form-control-lg" id="shipping-fn"
                                                    required="">
                                            </div>
                                            <div class="col">
                                                <label for="shipping-ln" class="form-label">Last name <span
                                                        class="text-danger">*</span></label>
                                                <input type="text" class="form-control form-control-lg" id="shipping-ln"
                                                    required="">
                                            </div>
                                            <div class="col">
                                                <label for="shipping-email" class="form-label">Email address <span
                                                        class="text-danger">*</span></label>
                                                <input type="email" class="form-control form-control-lg"
                                                    id="shipping-email" required="">
                                            </div>
                                            <div class="col">
                                                <label for="shipping-mobile" class="form-label">Mobile number</label>
                                                <input type="text" class="form-control form-control-lg"
                                                    id="shipping-mobile">
                                            </div>
                                            <div class="col">
                                                <label for="shipping-postcode" class="form-label">Country <span
                                                        class="text-danger">*</span></label>
                                                <select name="CountrySame" class="form-select" required="">
                                                    <option value="United States">United States</option>
                                                </select>
                                            </div>

                                            <div class="col">
                                                <label class="form-label">State <span
                                                        class="text-danger">*</span></label>
                                                <select id="StateSelectCurrentSame" name="State" class="form-select"
                                                    required="">
                                                    <option value="">Select your state</option>
                                                </select>
                                            </div>

                                            <div class="col">
                                                <label class="form-label">City <span
                                                        class="text-danger">*</span></label>
                                                <select hidden id="CitySelecttCurrentSame" name="City"
                                                    class="form-select" required="">
                                                    <option value="">Select your city</option>
                                                </select>
                                                <input type="text" class="form-control form-control-lg"
                                                    id="shipping-postcode" required="">
                                            </div>

                                            <div class="col">
                                                <label for="shipping-postcode" class="form-label">Postcode <span
                                                        class="text-danger">*</span></label>
                                                <input type="text" class="form-control form-control-lg"
                                                    id="shipping-postcodesame" required="">
                                            </div>

                                        </div>
                                        <div class="mb-3">
                                            <label for="shipping-address" class="form-label">Street Address <span
                                                    class="text-danger">*</span></label>
                                            <input type="text" class="form-control form-control-lg"
                                                id="shipping-address" required="">
                                        </div>


                                    </div>
                                    <a id="continue-btn" class="btn btn-lg btn-primary w-100 d-flex"
                                        style="justify-content: center; position: relative; z-index: 1000; pointer-events: auto; display: flex; padding: 10px 15px; text-align: center; color: white; border: none; border-radius: 5px;"
                                        href="javascript:void(0);">
                                        Continue
                                        <i class="ci-chevron-right fs-lg ms-1 me-n1"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- </div> -->
                    <% let totalPrice=0; %>
                        <div style="display: none;" id="payment-section"
                            class="col-lg-8 col-xl-7 position-relative z-2 mb-5 mb-lg-0">
                            <div class="accordion d-flex flex-column gap-5 pe-lg-4 pe-xl-0" id="checkout">

                                <div class="d-flex align-items-start">
                                    <div class="d-flex align-items-center justify-content-center bg-primary text-white rounded-circle fs-sm fw-semibold lh-1 flex-shrink-0"
                                        style="width: 2rem; height: 2rem; margin-top: -.125rem">2</div>
                                    <div class="w-100 ps-3 ps-md-4">
                                        <h2 class="h5 mb-0">Payment</h2>
                                        <a class="nav-link text-decoration-underline p-0" onclick="BackToInformation()"
                                            href="#">Edit</a>
                                        <div class="mb-4" id="paymentMethod" role="list">
                                            <div class="mt-4">
                                                <div class="form-check mb-0" role="listitem" data-bs-toggle="collapse"
                                                    data-bs-target="#cash" aria-expanded="false" aria-controls="cash">
                                                </div>
                                                <div class="collapse" id="cash" data-bs-parent="#paymentMethod">
                                                    <div
                                                        class="d-sm-flex align-items-center pt-3 pt-sm-4 pb-2 ps-3 ms-2 ms-sm-3">
                                                        <span class="fs-sm me-3">I would require a change from:</span>
                                                        <div class="input-group mt-2 mt-sm-0" style="max-width: 150px">
                                                            <span class="input-group-text">
                                                                <i class="ci-dollar-sign"></i>
                                                            </span>
                                                            <input type="number" class="form-control"
                                                                aria-label="Amount (to the nearest dollar)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <div class="form-check mb-0" role="listitem" data-bs-toggle="collapse"
                                                    data-bs-target="#card" aria-expanded="true" aria-controls="card">
                                                    <label
                                                        class="form-check-label d-flex align-items-center text-dark-emphasis fw-semibold">
                                                        <input type="radio"
                                                            class="form-check-input fs-base me-2 me-sm-3"
                                                            name="payment-method" checked="">
                                                        Credit or debit card
                                                        <span class="d-none d-sm-flex gap-2 ms-3">
                                                            <img src="/client2/assets/img/payment-methods/amex.svg"
                                                                class="d-block bg-info rounded-1" width="36" alt="Amex">
                                                            <img src="/client2/assets/img/payment-methods/visa-light-mode.svg"
                                                                class="d-none-dark" width="36" alt="Visa">
                                                            <img src="/client2/assets/img/payment-methods/visa-dark-mode.svg"
                                                                class="d-none d-block-dark" width="36" alt="Visa">
                                                            <img src="/client2/assets/img/payment-methods/mastercard.svg"
                                                                width="36" alt="Mastercard">
                                                            <img src="/client2/assets/img/payment-methods/maestro.svg"
                                                                width="36" alt="Maestro">
                                                        </span>
                                                    </label>
                                                </div>
                                                <div class="collapse show" id="card" data-bs-parent="#paymentMethod">
                                                    <div class="position-relative mb-3 mb-sm-4">
                                                        <input type="text"
                                                            class="form-control form-control-lg form-icon-end"
                                                            placeholder="xxxx xxxx xxxx xxxx"
                                                            oninput="formatCardNumber(this)" maxlength="19" required=""
                                                            name="cardNumber">
                                                        <span
                                                            class="position-absolute d-flex top-50 end-0 translate-middle-y fs-5 text-body-tertiary me-3"
                                                            data-card-icon=""></span>
                                                        <span id="card-error" style="color: red; display: none;">Invalid
                                                            card number</span>
                                                    </div>
                                                    <div class="row row-cols-1 row-cols-sm-2 g-3 g-sm-4">
                                                        <div class="col">
                                                            <input type="text" class="form-control form-control-lg"
                                                                pattern="(0[1-9]|1[0-2])\/\d{2}" name="expiry"
                                                                maxlength="5" oninput="formatExpiryDate(this)"
                                                                placeholder="MM/YY">
                                                        </div>
                                                        <div class="col">
                                                            <input type="text" class="form-control form-control-lg"
                                                                maxlength="3" pattern="\d{3}"
                                                                oninput="validateCVV(this)"
                                                                pattern="(0[1-9]|1[0-2])\/\d{2}" maxlength="3"
                                                                minlength="3" placeholder="CVC" name="cvv">
                                                            <span id="cvv-error"
                                                                style="color: red; display: none;">Invalid
                                                                CVV</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <textarea class="form-control form-control-lg mb-4" rows="3"
                                        placeholder="Additional comments"></textarea> -->

                                        <div class="form-check mb-lg-4">
                                            <input type="checkbox" class="form-check-input" id="accept-terms">
                                            <label for="accept-terms" class="form-check-label nav align-items-center">
                                                I accept the
                                            </label>
                                        </div>

                                        <% cart.forEach((product , index)=> { %>

                                            <% totalPrice +=product.price * product.quantity; %>
                                                <% }); %>
                                                    <button id="payButton"
                                                        class="btn btn-lg btn-primary w-100 d-flex d-lg-flex"
                                                        style="justify-content: center;" type="button">
                                                        Pay $<%= (totalPrice + 25 + 5).toFixed(2) %>
                                                    </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <aside class="col-lg-4 offset-xl-1" style="margin-top: -100px">
                            <div class="position-sticky top-0" style="padding-top: 100px">
                                <div class="bg-body-tertiary rounded-5 p-4 mb-3" style="background-color: #f8f9fa;">
                                    <div class="p-sm-2 p-lg-0 p-xl-2">
                                        <div class="border-bottom pb-4 mb-4">
                                            <div class="d-flex align-items-center justify-content-between mb-4">
                                                <h5 class="mb-0">Order summary</h5>
                                            </div>
                                            <a class="d-flex align-items-center gap-2 text-decoration-none"
                                                href="#orderPreview" data-bs-toggle="offcanvas">
                                                <% cart.forEach((product , index)=> { %>
                                                    <div class="ratio ratio-1x1" style="max-width: 64px">
                                                        <img src="<%= product.imageUrl %>" class="d-block p-1"
                                                            alt="<%= product.name %>">
                                                    </div>
                                                    <% }); %>

                                                        <i class="ci-chevron-right text-body fs-xl p-0 ms-auto"></i>
                                            </a>
                                        </div>
                                        <ul class="list-unstyled fs-sm gap-3 mb-0">
                                            <li class="d-flex justify-content-between">
                                                Subtotal (<%= cart.length %> items):
                                                    <span class="text-dark-emphasis fw-medium">$<%=totalPrice.toFixed(2)
                                                            %></span>
                                            </li>
                                            <li class="d-flex justify-content-between">
                                                Tax collected:
                                                <span class="text-dark-emphasis fw-medium">$25</span>
                                            </li>
                                            <li class="d-flex justify-content-between">
                                                Shipping:
                                                <span class="text-dark-emphasis fw-medium">$5</span>
                                            </li>
                                        </ul>
                                        <div class="border-top pt-4 mt-4">
                                            <div class="d-flex justify-content-between mb-3">
                                                <span class="fs-sm">Estimated total:</span>
                                                <span class="h5 mb-0">$<%= (totalPrice + 25 + 5).toFixed(2) %></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </aside>
                </div>
            </form>
        </div>
        <div id="paypal-button-container"></div>
    </main>



    <script src="/client2/assets/vendor/choices.js/choices.min.js"></script>

    <!-- Bootstrap + Theme scripts -->
    <script src="/client2/assets/js/theme.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.4/jquery-confirm.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.4/jquery-confirm.min.js"></script>

    <script>
        var stateSelect = document.querySelector('#StateSelectCurrent'),
            citySelect = document.querySelector('#CitySelecttCurrent')
        var stateSelectSame = document.querySelector('#StateSelectCurrentSame'),
            citySelectSame = document.querySelector('#CitySelecttCurrentSame')
        document.addEventListener("DOMContentLoaded", function () {
            const continueBtn = document.querySelector('#continue-btn'); // Add id to the continue button
            const paymentSection = document.querySelector('#payment-section');
            const formInfor = document.querySelector('.inform');
            const form = document.querySelector('.needs-validation');

            const forms = document.getElementById('checkoutForm');
            const payButton = document.getElementById('payButton');
            payButton.addEventListener('click', function () {
                // Call the validation function
                const isValid = validateForm();
                console.log(isValid);
                if (isValid) {
                    forms.submit();
                } else {
                    $.alert({
                        title: 'Validation Error!',
                        content: 'Fill in the correct card information.',
                        type: 'red',
                        icon: 'fas fa-exclamation-triangle', // Font Awesome icon
                        theme: 'modern', // Change the theme
                        buttons: {
                            ok: {
                                text: 'OK',
                                btnClass: 'btn-danger',
                                action: function () {
                                    // Optional: Add any action when OK is clicked
                                }
                            }
                        },
                        onOpen: function () {
                            this.$content.css({
                                'font-size': '16px',
                                'text-align': 'center', // Center align text
                                'padding': '20px' // Add padding
                            });
                        }
                    });
                }
            });
            continueBtn.addEventListener('click', function (e) {

                try {

                    var firstName = document.getElementById('shipping-fn').value;
                    var lastName = document.getElementById('shipping-ln').value;
                    var email = document.getElementById('shipping-email').value;
                    var mobile = document.getElementById('shipping-mobile').value;
                    var postcode = document.getElementById('shipping-postcode').value;
                    var address = document.getElementById('shipping-address').value;

                    // Kiểm tra nếu có trường nào bị trống 
                    if (!firstName || !lastName || !email || !postcode || !address || stateSelect.value == '') {
                        $.alert({
                            title: 'Validation Error!',
                            content: 'Please fill out all required fields.',
                            type: 'red',
                            icon: 'fas fa-exclamation-triangle', // Font Awesome icon
                            theme: 'modern', // Change the theme
                            buttons: {
                                ok: {
                                    text: 'OK',
                                    btnClass: 'btn-danger',
                                    action: function () {
                                        // Optional: Add any action when OK is clicked
                                    }
                                }
                            },
                            onOpen: function () {
                                // Add custom animations or styles on open
                                this.$content.css({
                                    'font-size': '16px', // Adjust font size
                                    'text-align': 'center', // Center align text
                                    'padding': '20px' // Add padding
                                });
                            }
                        });
                        return;
                    }

                    var postcodeRegex = /^\d{5}$/;

                    // Kiểm tra nếu không hợp lệ
                    if (!postcodeRegex.test(postcode)) {
                        $.alert({
                            title: 'Validation Error!',
                            content: 'Postcode must be exactly 5 digits.',
                            type: 'red',
                            icon: 'fas fa-exclamation-triangle', // Font Awesome icon
                            theme: 'modern', // Change the theme
                            buttons: {
                                ok: {
                                    text: 'OK',
                                    btnClass: 'btn-danger',
                                    action: function () {
                                        // Optional: Add any action when OK is clicked
                                    }
                                }
                            },
                            onOpen: function () {
                                // Add custom animations or styles on open
                                this.$content.css({
                                    'font-size': '16px', // Adjust font size
                                    'text-align': 'center', // Center align text
                                    'padding': '20px' // Add padding
                                });
                            }
                        });
                        return; // Dừng nếu không hợp lệ
                    }
                    e.preventDefault(); // Prevent default action
                    console.log("3");
                    paymentSection.style.display = 'block';
                    formInfor.style.display = 'none';
                    form.classList.add('was-validated');
                } catch (error) {
                    console.log(error);
                }
            });
        });



        function validateForm() {
            let isValid = true;
            const carderror = document.getElementById('card-error');
            const cvverror = document.getElementById('cvv-error');

            const cardNumber = document.querySelector('input[name="cardNumber"]').value.trim();
            const expiry = document.querySelector('input[name="expiry"]').value.trim();
            const cvv = document.querySelector('input[name="cvv"]').value.trim();

            if (carderror.style.display !== 'none' || cvverror.style.display !== 'none') {
                isValid = false; // Set isValid to false if any error message is visible
            }
            if (cardNumber == '' || expiry === '' || cvv === '') isValid = false;

            return isValid;
        }



        function BackToInformation() {
            const btnback = document.querySelector('.btnback');
            const formInfor = document.querySelector('.inform');
            const paymentSection = document.querySelector('#payment-section');

            paymentSection.style.display = 'none';
            formInfor.style.display = 'block';
        }

        function validateCVV(cvvInput) {
            const cvvError = document.getElementById('cvv-error');
            if (cvvInput.value.length !== 3) {
                cvvError.style.display = 'block';
                return false;
            } else {
                cvvError.style.display = 'none';
                return true
            }
        }
        function formatCardNumber(cardInput) {
            const cardValue = cardInput.value.replace(/\D/g, '');
            const formattedValue = cardValue.replace(/(\d{4})(?=\d)/g, '$1 ');
            cardInput.value = formattedValue.trim();
            validateCardNumber(cardValue);
        }
        function formatExpiryDate(input) {
            let value = input.value.replace(/\D/g, ''); // Remove any non-digit characters

            if (value.length >= 2) {
                value = value.slice(0, 2) + '/' + value.slice(2, 4); // Insert '/' after the month
            }

            input.value = value; // Set the formatted value back to the input
        }


        function validateCardNumber(cardNumber) {
            let sum = 0;
            let shouldDouble = false;
            for (let i = cardNumber.length - 1; i >= 0; i--) {
                let digit = parseInt(cardNumber.charAt(i));
                if (shouldDouble) {
                    digit *= 2;
                    if (digit > 9) {
                        digit -= 9;
                    }
                }
                sum += digit;
                shouldDouble = !shouldDouble;
            }
            const isValid = sum % 10 === 0;
            document.getElementById('card-error').style.display = isValid ? 'none' : 'block';
            return isValid;
        }

        document.getElementById('same-address').addEventListener('change', function () {
            var shippingForm = document.getElementById('shipping-address-form-2');
            console.log(this.checked);
            if (this.checked) {
                shippingForm.style.display = 'none'; // Ẩn form khi checkbox được tích
            } else {
                shippingForm.style.display = 'block'; // Hiện form khi checkbox bị bỏ tích
            }
        });

        // Ẩn form nếu checkbox mặc định đang được tích
        window.addEventListener('load', function () {
            var shippingForm = document.getElementById('shipping-address-form');
            var sameAddressCheckbox = document.getElementById('same-address');
            if (sameAddressCheckbox.checked) {
                shippingForm.style.display = 'block';
            }
        });
        var config = {
            cUrl: 'https://api.countrystatecity.in/v1/countries',
            ckey: 'NHhvOEcyWk50N2Vna3VFTE00bFp3MjFKR0ZEOUhkZlg4RTk1MlJlaA==' // API key
        }

        function loadStates() {
            console.log("Loading states for first set...");

            stateSelect.disabled = false
            citySelect.disabled = true
            stateSelect.style.pointerEvents = 'auto'
            citySelect.style.pointerEvents = 'none'

            const selectedCountryCode = 'US'
            stateSelect.innerHTML = '<option value="">Select State</option>'
            citySelect.innerHTML = '<option value="">Select City</option>'

            fetch(`${config.cUrl}/${selectedCountryCode}/states`, {
                headers: { "X-CSCAPI-KEY": config.ckey }
            })
                .then(response => {
                    return response.json();
                })
                .then(data => {
                    if (data.length > 0) {
                        data.forEach(state => {
                            const option = document.createElement('option')
                            option.value = state.iso2
                            option.textContent = state.name
                            stateSelect.appendChild(option)
                        })
                    } else {
                        console.error("No states found for the selected country.");
                    }
                })
                .catch(error => console.error('Error loading states:', error))

            // Load states for the second set (Same)
            loadStatesSame(); // Call this to load states for the second select (StateSelectCurrentSame)
        }

        function loadStatesSame() {
            console.log("Loading states for second set...");

            stateSelectSame.disabled = false
            citySelectSame.disabled = true
            stateSelectSame.style.pointerEvents = 'auto'
            citySelectSame.style.pointerEvents = 'none'

            const selectedCountryCode = 'US'
            stateSelectSame.innerHTML = '<option value="">Select State</option>'
            citySelectSame.innerHTML = '<option value="">Select City</option>'

            fetch(`${config.cUrl}/${selectedCountryCode}/states`, {
                headers: { "X-CSCAPI-KEY": config.ckey }
            })
                .then(response => {
                    console.log("Response status for states (Same):", response.status);
                    return response.json();
                })
                .then(data => {
                    console.log("States data received (Same):", data);

                    if (data.length > 0) {
                        data.forEach(state => {
                            const option = document.createElement('option')
                            option.value = state.iso2
                            option.textContent = state.name
                            stateSelectSame.appendChild(option)
                        })
                    } else {
                        console.error("No states found for the selected country (Same).");
                    }
                })
                .catch(error => console.error('Error loading states (Same):', error))
        }

        function loadCities() {
            console.log("Loading cities for first set...");

            citySelect.disabled = false
            citySelect.style.pointerEvents = 'auto'

            const selectedCountryCode = 'US'
            const selectedStateCode = stateSelect.value
            citySelect.innerHTML = '<option value="">Select City</option>'

            fetch(`${config.cUrl}/${selectedCountryCode}/states/${selectedStateCode}/cities`, {
                headers: { "X-CSCAPI-KEY": config.ckey }
            })
                .then(response => {
                    console.log("Response status for cities:", response.status);
                    return response.json();
                })
                .then(data => {
                    console.log("Cities data received:", data);

                    if (data.length > 0) {
                        data.forEach(city => {
                            const option = document.createElement('option')
                            option.value = city.name
                            option.textContent = city.name
                            citySelect.appendChild(option)
                        })
                    } else {
                        console.error("No cities found for the selected state.");
                    }
                })
                .catch(error => console.error('Error loading cities:', error))
        }

        function loadCitiesSame() {
            console.log("Loading cities for second set...");

            citySelectSame.disabled = false
            citySelectSame.style.pointerEvents = 'auto'

            const selectedCountryCode = 'US'
            const selectedStateCode = stateSelectSame.value
            citySelectSame.innerHTML = '<option value="">Select City</option>'

            fetch(`${config.cUrl}/${selectedCountryCode}/states/${selectedStateCode}/cities`, {
                headers: { "X-CSCAPI-KEY": config.ckey }
            })
                .then(response => {
                    return response.json();
                })
                .then(data => {
                    console.log("Cities data received (Same):", data);

                    if (data.length > 0) {
                        data.forEach(city => {
                            const option = document.createElement('option')
                            option.value = city.name
                            option.textContent = city.name
                            citySelectSame.appendChild(option)
                        })
                    } else {
                        console.error("No cities found for the selected state (Same).");
                    }
                })
                .catch(error => console.error('Error loading cities (Same):', error))
        }

        window.onload = loadStates; // Load the states for both sets on page load
        stateSelect.addEventListener('change', loadCities);
        stateSelectSame.addEventListener('change', loadCitiesSame);



        paypal.Buttons({
            createOrder: function (data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: '10.00' // Số tiền thanh toán
                        }
                    }]
                });
            },
            onApprove: function (data, actions) {
                return actions.order.capture().then(function (details) {
                    console.log("llllllllllllllllllll");
                    alert('Transaction completed by ' + details.payer.name.given_name);
                });
            }
        }).render('#paypal-button-container'); // Render PayPal button


    </script>


</body>
<!-- Mirrored from cartzilla.createx.studio/checkout-v1-shipping.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 06 Sep 2024 06:29:44 GMT -->

</html>